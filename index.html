<html>
	<head>
		<title>Vappulaskuri</title>
	</head>
	<body>
		<h1>Vappulaskuri</h1>
		<div id="countdown"></div>
		<script type="text/javascript" src="http://countdownjs.org/lib/raf/requestAnimationFrame.js"></script>
		<script type="text/javascript" src="https://cdn.rawgit.com/mckamey/countdownjs/master/countdown.min.js"></script>
		<script>
			function update() {
				countdown.setLabels(
					'| sekuntti| minuutti| tunti| päivä',
					'| sekunttia| minuuttia| tuntia| päivää',
					' ja ',
					', ',
					'nyt');

				var now = new Date();
				var target;

				if (now.getMonth() == 4 && now.getDate() == 0) { // 1.5. !!!
					target = now;
				} else if (now.getMonth() == 3 && now.getDate() == 29 && now.getHours >= 17) { // 30.4. 18:00 !!!
					target = now;
				} else if (now.getMonth() > 3) { // nyt on vapun jälkeen
					target = new Date(now.getFullYear() + 1, 3, 30, 18);
				} else { // nyt on ennen vappua
					target = new Date(now.getFullYear() + 1, 3, 30, 18);
				}

				if (target == now) {
					document.getElementById('countdown').innerHTML = "Nyt !!!"
				} else {
					var cd = countdown(
						target,
						function(ts){
							document.getElementById('countdown').innerHTML = ts.toHTML("strong");
						},
						countdown.YEARS|countdown.DAYS|countdown.HOURS|countdown.MINUTES|countdown.SECONDS);

				}

			}
			update();
		</script>
		<a href="https://github.com/arska/vappulaskuri"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/a6677b08c955af8400f44c6298f40e7d19cc5b2d/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677261795f3664366436642e706e67" alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png"></a>
	</body>
</html>
