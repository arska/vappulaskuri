<html>
	<head>
		<title>Vappulaskuri</title>
	</head>
	<body>
		<h1>Vappu 2016</h1>
		<div id="countdown"></div>
		<script type="text/javascript" src="http://countdownjs.org/lib/raf/requestAnimationFrame.js"></script>
		<script type="text/javascript" src="https://cdn.rawgit.com/mckamey/countdownjs/master/countdown.min.js"></script>
		<script>
			function update() {
				countdown.setLabels(
					'| sekuntti| minuutti| tunti| päivä',
					'| sekunttia| minuuttia| tuntia| päivää',
					' ja ',
					', ',
					'nyt');

				var now = new Date();
				var target;

				if (now.getMonth() == 4 && now.getDate() == 0) { // 1.5. !!!
					target = now;
				} else if (now.getMonth() == 3 && now.getDate() == 29 && now.getHours >= 17) { // 30.4. 18:00 !!!
					target = now;
				} else if (now.getMonth() > 3) { // nyt on vapun jälkeen
					target = new Date(now.getFullYear() + 1, 3, 30, 18);
				} else { // nyt on ennen vappua
					target = new Date(now.getFullYear() + 1, 3, 30, 18);
				}

				if (target == now) {
					document.getElementById('countdown').innerHTML = "Nyt !!!"
				} else {
					var cd = countdown(
						target,
						function(ts){
							document.getElementById('countdown').innerHTML = ts.toHTML("strong");
						},
						countdown.YEARS|countdown.DAYS|countdown.HOURS|countdown.MINUTES|countdown.SECONDS);

				}

			}
			update();
		</script>
	</body>
</html>